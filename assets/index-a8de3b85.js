import{K as v,_ as H,r as g,D as G,d as u,o as _,q as w,w as t,f as e,h as p,k as N,B as C,g as r,t as S,e as b,F as E,n as I,L as k,p as J,j as Q}from"./index-c2309140.js";const h={SKU_URL:"/admin/product/list/",SALE_URL:"/admin/product/onSale/",CANCELSALE_URL:"/admin/product/cancelSale/",SKUINFO_URL:"/admin/product/getSkuInfo/",DELETESKU_URL:"/admin/product/deleteSku/"},W=(s,n)=>v.get(h.SKU_URL+`${s}/${n}`),X=s=>v.get(h.SALE_URL+s),Y=s=>v.get(h.CANCELSALE_URL+s),Z=s=>v.get(h.SKUINFO_URL+s),ee=s=>v.delete(h.DELETESKU_URL+s);const te=s=>(J("data-v-efc00f55"),s=s(),Q(),s),ae=["src"],le=te(()=>N("h4",null,"查看商品的详情",-1)),se=["src"],ne={__name:"index",setup(s){let n=g(1),x=g(10),R=g(0),U=g([]);G(()=>{m()});const m=async(i=1)=>{n.value=i;let l=await W(n.value,x.value);l.code==200&&(R.value=l.data.total,U.value=l.data.records)},V=async i=>{i.isSale==1?(await Y(i.id),k({type:"success",message:"下架成功"}),m(n.value)):(await X(i.id),k({type:"success",message:"上架成功"}),m(n.value))},D=()=>{k({type:"success",message:"程序员在努力的更新中...."})};let y=g(!1),d=g({});const q=async i=>{y.value=!0;let l=await Z(i.id);d.value=l.data},K=async i=>{(await ee(i)).code==200?(k({type:"success",message:"删除成功"}),m(U.value.length>1?n.value:n.value-1)):k({type:"error",message:"系统数据不能删除"})};return(i,l)=>{const c=u("el-table-column"),L=u("el-button"),B=u("el-popconfirm"),$=u("el-table"),F=u("el-pagination"),o=u("el-col"),f=u("el-row"),z=u("el-tag"),T=u("el-carousel-item"),j=u("el-carousel"),M=u("el-drawer"),O=u("el-card");return _(),w(O,null,{default:t(()=>[e($,{border:"",style:{margin:"10px 0"},data:p(U)},{default:t(()=>[e(c,{label:"序号",type:"index",align:"center",width:"80px"}),e(c,{label:"名称","show-overflow-tooltip":"",width:"150px",prop:"skuName"}),e(c,{label:"描述","show-overflow-tooltip":"",width:"150px",prop:"skuDesc"}),e(c,{label:"图片",width:"150px"},{default:t(({row:a,$index:P})=>[N("img",{src:a.skuDefaultImg,alt:"",style:{width:"100px",height:"100px"}},null,8,ae)]),_:1}),e(c,{label:"重量",width:"150px",prop:"weight"}),e(c,{label:"价格",width:"150px",prop:"price"}),e(c,{label:"操作",width:"250px",fixed:"right"},{default:t(({row:a,$index:P})=>[e(L,{type:"primary",size:"small",icon:a.isSale==1?"Bottom":"Top",onClick:A=>V(a)},null,8,["icon","onClick"]),e(L,{type:"primary",size:"small",icon:"Edit",onClick:D}),e(L,{type:"primary",size:"small",icon:"InfoFilled",onClick:A=>q(a)},null,8,["onClick"]),e(B,{title:`你确定要删除${a.skuName}?`,width:"200px",onConfirm:A=>K(a.id)},{reference:t(()=>[e(L,{type:"primary",size:"small",icon:"Delete"})]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),e(F,{"current-page":p(n),"onUpdate:currentPage":l[0]||(l[0]=a=>C(n)?n.value=a:n=a),"page-size":p(x),"onUpdate:pageSize":l[1]||(l[1]=a=>C(x)?x.value=a:x=a),"page-sizes":[10,20,30,40],background:!0,layout:"prev, pager, next, jumper, ->, sizes, total",total:p(R),onCurrentChange:m,onSizeChange:l[2]||(l[2]=a=>m())},null,8,["current-page","page-size","total"]),e(M,{modelValue:p(y),"onUpdate:modelValue":l[3]||(l[3]=a=>C(y)?y.value=a:y=a)},{header:t(()=>[le]),default:t(()=>[e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[r("名称")]),_:1}),e(o,{span:18},{default:t(()=>[r(S(p(d).skuName),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[r("描述")]),_:1}),e(o,{span:18},{default:t(()=>[r(S(p(d).skuDesc),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[r("价格")]),_:1}),e(o,{span:18},{default:t(()=>[r(S(p(d).price),1)]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[r("平台属性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),b(E,null,I(p(d).skuAttrValueList,a=>(_(),w(z,{style:{margin:"5px"},key:a.id},{default:t(()=>[r(S(a.valueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[r("销售属性")]),_:1}),e(o,{span:18},{default:t(()=>[(_(!0),b(E,null,I(p(d).skuSaleAttrValueList,a=>(_(),w(z,{style:{margin:"5px"},key:a.id,type:"danger"},{default:t(()=>[r(S(a.saleAttrValueName),1)]),_:2},1024))),128))]),_:1})]),_:1}),e(f,{style:{margin:"10px 0px"}},{default:t(()=>[e(o,{span:6},{default:t(()=>[r("商品图片")]),_:1}),e(o,{span:18},{default:t(()=>[e(j,{interval:4e3,type:"card",height:"200px"},{default:t(()=>[(_(!0),b(E,null,I(p(d).skuImageList,a=>(_(),w(T,{key:a.id},{default:t(()=>[N("img",{src:a.imgUrl,alt:"",style:{width:"100%",height:"100%"}},null,8,se)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}},ue=H(ne,[["__scopeId","data-v-efc00f55"]]);export{ue as default};
